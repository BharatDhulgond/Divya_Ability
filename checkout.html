<!DOCTYPE html>
<html>
<head>
  <title>Razorpay Custom Checkout</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { display: flex; height: 100vh; align-items: center; justify-content: center; flex-direction: column; background: #f7f9fa; }
    .input-group { margin-bottom: 20px; }
    #amount { width: 200px; padding: 8px; font-size: 16px; }
    #rzp-button1 { margin-top: 10px; }
  </style>
</head>
<body>
  <div class="input-group">
    <label for="amount">Enter Amount (INR): </label>
    <input type="number" id="amount" value="1000" min="1" step="1" required>
  </div>
  <button id="rzp-button1" class="btn btn-outline-dark btn-lg">
    <i class="fas fa-money-bill"></i> Own Checkout
  </button>
  
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('rzp-button1').onclick = function(e) {
        e.preventDefault();
        var amountInput = document.getElementById('amount').value;
        var amountInt = parseInt(amountInput);
        if (isNaN(amountInt) || amountInt <= 0) {
          alert("Please enter a valid amount greater than 0");
          return;
        }
        // Create a fresh options object **with the new amount**
        var options = {
          "key": "rzp_test_R5yU9vAMq1UgrK", // Replace with your Key ID
          "amount": amountInt * 100, // Razorpay takes amount in paise
          "currency": "INR",
          "description": "Acme Corp",
          "image": "https://example.com/image/rzp.jpg",
          "prefill": {
            "email": "dhulgond22bharat@gmail.com",
            "contact": "9379515454"
          },
          config: {
            display: {
              blocks: {
                utib: {
                  name: "Pay Using Axis Bank",
                  instruments: [
                    { method: "card", issuers: ["UTIB"] },
                    { method: "netbanking", banks: ["UTIB"] },
                    { method: "upi" }
                  ]
                },
                other: {
                  name: "Other Payment Methods",
                  instruments: [
                    { method: "card", issuers: ["ICIC"] },
                    { method: "netbanking" },
                    { method: "upi" }
                  ]
                }
              },
              hide: [],
              sequence: ["block.utib", "block.other"],
              preferences: {
                show_default_blocks: false
              }
            }
          },
          "handler": function (response) {
            alert("Payment successful! Payment ID: " + response.razorpay_payment_id);
          },
          "modal": {
            "ondismiss": function () {
              if (confirm("Are you sure you want to close the form?")) {
                console.log("Checkout form closed by the user");
              } else {
                console.log("Complete the Payment");
              }
            }
          }
        };
        // Create a NEW Razorpay object with updated options every time
        var rzp1 = new Razorpay(options);
        rzp1.open();
      }
    });
  </script>
</body>
</html>
